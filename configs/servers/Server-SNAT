#!/bin/sh
set -eux

# ETH0: 10.250.250.205/24 (primary default route)
ip addr flush dev eth0 || true
ip addr add 10.250.250.205/24 dev eth0
ip link set eth0 up

# ETH1: 10.251.0.254/24
ip addr flush dev eth1 || true
ip addr add 10.251.0.205/24 dev eth1
ip link set eth1 up

# Make eth0 the primary default route
ip route replace default via 10.250.250.1 dev eth0

# No extra static routes via eth1 (only its connected /24 as requested)

# ---- Minimal HTTP server (HTTP only) ----
# Use BusyBox httpd (already in Alpine-based images like netshoot)
mkdir -p /srv/www
# Simple plaintext-ish message (served as HTML)
printf 'OK - hello from %s\n' "$(hostname)" > /srv/www/index.html

# Run BusyBox httpd in the foreground on port 80 so the container stays alive
busybox httpd -f -p 0.0.0.0:80 -h /srv/www
